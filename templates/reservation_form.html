{% extends "base.html" %}
{% set title = "予約内容の入力" %}

{% block content %}
<section class="card">
  <div class="stepbar" aria-label="手順">
    <div class="step">1 予約開始</div>
    <div class="step">2 メール</div>
    <div class="step is-active">3 入力</div>
    <div class="step">4 受付</div>
  </div>

  <h1 class="h1">予約内容を入力</h1>
  <p class="help">
    入力項目は最小限です。分からない所は空欄でもOKです。
  </p>

  {% if error %}
    <div class="alert" role="alert" aria-live="polite">{{ error }}</div>
  {% endif %}

  <form method="post" class="form" novalidate>
    <div class="readonly">
      <div class="label">メール（変更できません）</div>
      <div class="value">{{ email }}</div>
    </div>

    <label class="label" for="patient_name">お名前（必須）</label>
    <input class="input" id="patient_name" name="patient_name" type="text" required
           autocomplete="name" value="{{ (form.patient_name if form else '') }}"
           placeholder="例：山田 太郎">

    <label class="label">希望日（最大3つ・任意）</label>
    <div class="grid3">
      <input class="input" name="preferred_date1" type="date" value="{{ (form.preferred_date1 if form else '') }}">
      <input class="input" name="preferred_date2" type="date" value="{{ (form.preferred_date2 if form else '') }}">
      <input class="input" name="preferred_date3" type="date" value="{{ (form.preferred_date3 if form else '') }}">
    </div>

    <label class="label" for="preferred_time">希望時間帯（任意）</label>
    <select class="input" id="preferred_time" name="preferred_time">
      <option value="">指定なし</option>
      <option value="morning">午前</option>
      <option value="afternoon">午後</option>
      <option value="evening">夕方</option>
    </select>

    <label class="label" for="note">伝えたいこと（任意）</label>
    <textarea class="textarea" id="note" name="note" rows="5"
      placeholder="例：聞こえにくいので連絡はメール希望。できれば○曜日が良い。">{{ (form.note if form else '') }}</textarea>

    <button class="button" type="submit">送信する</button>
    <a class="link" href="{{ url_for('public.email_input') }}">最初からやり直す</a>
  </form>
</section>
{% endblock %}
